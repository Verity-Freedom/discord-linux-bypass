# Discord Linux Bypass

> [!WARNING]  
> Эта библиотека экспериментальна и может что-нибудь сломать. Используйте на свой страх и риск.

Простая библиотека для обхода блокировки голосовых чатов Discord на Linux. Она немного изменяет исходящий UDP трафик для обмана системы DPI.

Эта библиотека основана на наработках аналогичной библиотеки [discord-drover](https://github.com/hdrover/discord-drover) для Windows.

Протестирована на официальном приложении Discord и Vesktop.

## Использование
Необходимо указать переменную `LD_PRELOAD` перед запуском Discord для того, чтобы процесс Discord загрузил библиотеку.
Эта библиотека обходит только ограничения голосовых каналов. Для всего остального нужен прокси-сервер.

Скачайте библиотеку со страницы [Releases](https://github.com/nik9play/discord-linux-bypass/releases).
```bash
LD_PRELOAD=<путь_до_библиотеки>/libdiscordbypass.so discord --proxy-server=<прокси_url>
```
Вы можете добавить `alias` и изменить `.desktop` файл, если не хотите вводить эту команду каждый раз.

В [discord.sh](https://github.com/nik9play/discord-linux-bypass/blob/master/discord.sh) содержится пример скриптовой реализации. Вы помещаете скрипт и библиотеку в одну и ту же директорию и делаете его исполняемым. В зависимости от установленного приложения скрипт открывает или Discord или модифицированный клиент. Адрес прокси-сервера поменяйте самостоятельно.

## Настройка
По умолчанию библиотека отправляет 2 фейковых пакета, после которых идет задержка в 50 мс, после чего отправляется настоящий пакет STUN Binding request. 
Вы можете изменить это поведение указав следующие переменные окружения:
```bash
BYPASS_DELAY=50       # задержка перед отправкой настоящего пакета (по умолчанию 50)
BYPASS_FAKE_PAKETS=2  # количество фейковых пакетов перед настоящим (по умолчанию 2)
```